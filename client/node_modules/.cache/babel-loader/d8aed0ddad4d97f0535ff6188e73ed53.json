{"ast":null,"code":"import request from 'superagent';\nexport var PLAYLISTS_FETCHED = 'PLAYLISTS_FETCHED';\nexport var PLAYLIST_CREATE_SUCCESS = 'PLAYLIST_CREATE_SUCCESS'; // export const PLAYLIST_DELETE_SUCCESS = 'PLAYLIST_DELETE_SUCCESS'\n\nexport var PLAYLIST_FETCHED = 'PLAYLIST_FETCHED';\nvar baseUrl = 'http://localhost:5000';\n\nvar playlistsFetched = function playlistsFetched(playlists) {\n  return {\n    type: PLAYLISTS_FETCHED,\n    playlists: playlists\n  };\n};\n\nvar PlaylistCreateSuccess = function PlaylistCreateSuccess(playlists) {\n  return {\n    type: PLAYLIST_CREATE_SUCCESS,\n    playlists: playlists\n  };\n}; // const PlaylistCreateSuccess = playlists => ({\n//   type: PLAYLIST_DELETE_SUCCESS,\n//   playlists\n// })\n\n\nvar playlistFetched = function playlistFetched(playlist) {\n  return {\n    type: PLAYLIST_FETCHED,\n    playlist: playlist\n  };\n};\n\nexport var loadPlaylists = function loadPlaylists() {\n  return function (dispatch, getState) {\n    if (getState().playlists) return;\n    request(\"\".concat(baseUrl, \"/playlists\")).then(function (response) {\n      dispatch(playlistsFetched(response.body));\n    }).catch(console.error);\n  };\n};\nexport var createPlaylist = function createPlaylist(data) {\n  return function (dispatch) {\n    console.log('action');\n    request.post(\"\".concat(baseUrl, \"/playlists\")).send(data).then(function (response) {\n      console.log(response.body);\n      dispatch(PlaylistCreateSuccess(response.body));\n    }).catch(console.error);\n  };\n};\nexport var loadPlaylist = function loadPlaylist(id) {\n  return function (dispatch, getState) {\n    var state = getState().playlist;\n    if (state && state.id === id) return;\n    request(\"\".concat(baseUrl, \"/playlist/\").concat(id)).then(function (response) {\n      dispatch(playlistFetched(response.body));\n    }).catch(console.error);\n  };\n};","map":{"version":3,"sources":["/home/ser/Documents/Codaisseur/class-22/homework/postgres-api/client/src/actions/playlists.js"],"names":["request","PLAYLISTS_FETCHED","PLAYLIST_CREATE_SUCCESS","PLAYLIST_FETCHED","baseUrl","playlistsFetched","playlists","type","PlaylistCreateSuccess","playlistFetched","playlist","loadPlaylists","dispatch","getState","then","response","body","catch","console","error","createPlaylist","data","log","post","send","loadPlaylist","id","state"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,YAApB;AAEA,OAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,IAAMC,uBAAuB,GAAG,yBAAhC,C,CACP;;AACA,OAAO,IAAMC,gBAAgB,GAAG,kBAAzB;AAEP,IAAMC,OAAO,GAAG,uBAAhB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,SAAS;AAAA,SAAK;AACrCC,IAAAA,IAAI,EAAEN,iBAD+B;AAErCK,IAAAA,SAAS,EAATA;AAFqC,GAAL;AAAA,CAAlC;;AAKA,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAF,SAAS;AAAA,SAAK;AAC1CC,IAAAA,IAAI,EAAEL,uBADoC;AAE1CI,IAAAA,SAAS,EAATA;AAF0C,GAAL;AAAA,CAAvC,C,CAKA;AACA;AACA;AACA;;;AAEA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,QAAQ;AAAA,SAAK;AACnCH,IAAAA,IAAI,EAAEJ,gBAD6B;AAEnCO,IAAAA,QAAQ,EAARA;AAFmC,GAAL;AAAA,CAAhC;;AAKA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACzD,QAAIA,QAAQ,GAAGP,SAAf,EAA0B;AAE1BN,IAAAA,OAAO,WAAII,OAAJ,gBAAP,CACGU,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChBH,MAAAA,QAAQ,CAACP,gBAAgB,CAACU,QAAQ,CAACC,IAAV,CAAjB,CAAR;AACD,KAHH,EAIGC,KAJH,CAISC,OAAO,CAACC,KAJjB;AAKD,GAR4B;AAAA,CAAtB;AAUP,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD;AAAA,SAAU,UAAAT,QAAQ,EAAI;AAClDM,IAAAA,OAAO,CAACI,GAAR,CAAY,QAAZ;AACAtB,IAAAA,OAAO,CACJuB,IADH,WACWnB,OADX,iBAEGoB,IAFH,CAEQH,IAFR,EAGGP,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAChBG,MAAAA,OAAO,CAACI,GAAR,CAAYP,QAAQ,CAACC,IAArB;AACAJ,MAAAA,QAAQ,CAACJ,qBAAqB,CAACO,QAAQ,CAACC,IAAV,CAAtB,CAAR;AACD,KANH,EAOGC,KAPH,CAOSC,OAAO,CAACC,KAPjB;AAQD,GAV6B;AAAA,CAAvB;AAYP,OAAO,IAAMM,YAAY,GAAG,SAAfA,YAAe,CAACC,EAAD;AAAA,SAAQ,UAACd,QAAD,EAAWC,QAAX,EAAwB;AAC1D,QAAMc,KAAK,GAAGd,QAAQ,GAAGH,QAAzB;AACA,QAAIiB,KAAK,IAAIA,KAAK,CAACD,EAAN,KAAaA,EAA1B,EAA8B;AAE9B1B,IAAAA,OAAO,WAAII,OAAJ,uBAAwBsB,EAAxB,EAAP,CACGZ,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChBH,MAAAA,QAAQ,CAACH,eAAe,CAACM,QAAQ,CAACC,IAAV,CAAhB,CAAR;AACD,KAHH,EAIGC,KAJH,CAISC,OAAO,CAACC,KAJjB;AAKD,GAT2B;AAAA,CAArB","sourcesContent":["import request from 'superagent'\n\nexport const PLAYLISTS_FETCHED = 'PLAYLISTS_FETCHED'\nexport const PLAYLIST_CREATE_SUCCESS = 'PLAYLIST_CREATE_SUCCESS'\n// export const PLAYLIST_DELETE_SUCCESS = 'PLAYLIST_DELETE_SUCCESS'\nexport const PLAYLIST_FETCHED = 'PLAYLIST_FETCHED'\n\nconst baseUrl = 'http://localhost:5000'\n\nconst playlistsFetched = playlists => ({\n  type: PLAYLISTS_FETCHED,\n  playlists\n})\n\nconst PlaylistCreateSuccess = playlists => ({\n  type: PLAYLIST_CREATE_SUCCESS,\n  playlists\n})\n\n// const PlaylistCreateSuccess = playlists => ({\n//   type: PLAYLIST_DELETE_SUCCESS,\n//   playlists\n// })\n\nconst playlistFetched = playlist => ({\n  type: PLAYLIST_FETCHED,\n  playlist\n})\n\nexport const loadPlaylists = () => (dispatch, getState) => {\n  if (getState().playlists) return\n\n  request(`${baseUrl}/playlists`)\n    .then(response => {\n      dispatch(playlistsFetched(response.body))\n    })\n    .catch(console.error)\n}\n\nexport const createPlaylist = (data) => dispatch => {\n  console.log('action')\n  request\n    .post(`${baseUrl}/playlists`)\n    .send(data)\n    .then(response => {\n      console.log(response.body)\n      dispatch(PlaylistCreateSuccess(response.body))\n    })\n    .catch(console.error)\n}\n\nexport const loadPlaylist = (id) => (dispatch, getState) => {\n  const state = getState().playlist\n  if (state && state.id === id) return\n  \n  request(`${baseUrl}/playlist/${id}`)\n    .then(response => {\n      dispatch(playlistFetched(response.body))\n    })\n    .catch(console.error)\n}"]},"metadata":{},"sourceType":"module"}